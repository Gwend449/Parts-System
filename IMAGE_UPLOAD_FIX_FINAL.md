# üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –û–®–ò–ë–ö–ò –ó–ê–ì–†–£–ó–ö–ò –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ô

## üî¥ –ü—Ä–æ–±–ª–µ–º–∞
–ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –∞–¥–º–∏–Ω–∫–µ (PNG –∏–ª–∏ JPG) –ø–æ–ª—É—á–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞:
```
–§–∞–π–ª –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º
–î–æ–ø—É—Å—Ç–∏–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã: JPG, PNG, WEBP
```

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### –ü—Ä–∏—á–∏–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã:
1. **–í–∞–ª–∏–¥–∞—Ü–∏—è —Å –ø—Ä–∞–≤–∏–ª–æ–º `image`** - —Ç—Ä–µ–±—É–µ—Ç —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ GD —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
2. **–ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ MIME-—Ç–∏–ø–æ–≤** - `image/jpg` –≤–º–µ—Å—Ç–æ `image/jpeg`
3. **–ü—Ä–æ–±–ª–µ–º—ã —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** - GD —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–æ

### –ü—Ä–∏–º–µ–Ω–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

#### 1. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è (EnginesRequest.php)
**–ë—ã–ª–æ:**
```php
'images.*' => 'image|mimes:jpg,jpeg,png,webp|max:5120',
```

**–°—Ç–∞–ª–æ:**
```php
'images.*' => 'mimes:jpeg,jpg,png,webp|max:5120',
```

**–ü–æ—á–µ–º—É:** –ü—Ä–∞–≤–∏–ª–æ `image` —Ç—Ä–µ–±—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏–∏ `getimagesize()` –∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ GD. –ï—Å–ª–∏ —É–±—Ä–∞—Ç—å –µ–≥–æ, –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ–π–¥—ë—Ç —Ç–æ–ª—å–∫–æ –ø–æ MIME-—Ç–∏–ø–∞–º —á–µ—Ä–µ–∑ `mimes`, —á—Ç–æ –±–æ–ª–µ–µ –Ω–∞–¥—ë–∂–Ω–æ.

#### 2. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã MIME-—Ç–∏–ø—ã (Engine.php)
**–ë—ã–ª–æ:**
```php
->acceptsMimeTypes(['image/jpeg', 'image/png', 'image/webp', 'image/jpg']);
```

**–°—Ç–∞–ª–æ:**
```php
->acceptsMimeTypes(['image/jpeg', 'image/png', 'image/webp']);
```

**–ü–æ—á–µ–º—É:** `image/jpg` - –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π MIME-—Ç–∏–ø. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π: `image/jpeg`. –£–±—Ä–∞–ª–∏ –¥—É–±–ª–∏—Ä—É—é—â–∏–π—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–∏–ø.

#### 3. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
–°–æ–∑–¥–∞–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:
```bash
php artisan image:check-support
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –ø–æ–∫–∞–∂–µ—Ç:
- ‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ –ª–∏ GD —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ
- ‚úÖ –ö–∞–∫–∏–µ —Ñ–æ—Ä–º–∞—Ç—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è (JPEG, PNG, WebP, GIF)
- ‚ÑπÔ∏è –í–µ—Ä—Å–∏—è PHP

---

## üß™ –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ö–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞
```bash
# –í–æ–π—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä PHP
docker exec -it php_local bash

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É
php artisan image:check-support
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É
1. –û—Ç–∫—Ä–æ–π—Ç–µ –ª—é–±–æ–π –º–æ—Ç–æ—Ä –≤ –∞–¥–º–∏–Ω–∫–µ
2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ PNG –∏–ª–∏ JPG –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ
4. –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è

### –í–∞—Ä–∏–∞–Ω—Ç 3: –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à –ø–µ—Ä–µ–¥ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º
```bash
docker exec php_local php artisan cache:clear
docker exec php_local php artisan view:clear
```

---

## üìã –§–∞–π–ª—ã –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω—ã

1. ‚úÖ `app/Http/Requests/EnginesRequest.php` - —É–¥–∞–ª–µ–Ω–æ –ø—Ä–∞–≤–∏–ª–æ `image`
2. ‚úÖ `app/Models/Engine.php` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã MIME-—Ç–∏–ø—ã
3. ‚úÖ `app/Console/Commands/CheckImageSupport.php` - –Ω–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
4. ‚úÖ `app/Http/Controllers/DiagnosticsController.php` - –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

---

## üöÄ –î–∞–ª—å–Ω–µ–π—à–∏–µ –¥–µ–π—Å—Ç–≤–∏—è

### –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –≤—Å—ë –µ—â—ë —Å—É—â–µ—Å—Ç–≤—É–µ—Ç:

#### 1Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ GD —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ:
```bash
docker exec php_local php -r "echo extension_loaded('gd') ? 'GD OK' : 'GD NOT LOADED';"
```

#### 2Ô∏è‚É£ –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (–µ—Å–ª–∏ GD –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω):
```bash
docker-compose down
docker-compose build --no-cache php_local
docker-compose up -d php_local
```

#### 3Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞:
- –ú–∞–∫—Å–∏–º—É–º 5120 KB (5 MB)
- –§–æ—Ä–º–∞—Ç: JPG, PNG –∏–ª–∏ WEBP

#### 4Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
```bash
docker exec php_local tail -f storage/logs/laravel.log | grep -i image
```

---

## üìå –¢–µ–æ—Ä–∏—è

**–ü—Ä–∞–≤–∏–ª–æ `image`** –≤ Laravel —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–∞–∫:
```
image —Ñ–∞–π–ª ‚Üí getimagesize() ‚Üí –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–∞–∑–º–µ—Ä—ã ‚Üí —Ç—Ä–µ–±—É–µ—Ç GD
```

**–ü—Ä–∞–≤–∏–ª–æ `mimes`** —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–∞–∫:
```
—Ñ–∞–π–ª ‚Üí —á–∏—Ç–∞–µ—Ç MIME-—Ç–∏–ø ‚Üí —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —Å —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–º —Å–ø–∏—Å–∫–æ–º ‚Üí ‚úÖ
```

**–í—ã–≤–æ–¥:** –î–ª—è –ø—Ä–æ—Å—Ç–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ `mimes` –±–µ–∑ `image`.

---

## ‚ú® –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ PNG –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è  
‚úÖ JPG –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è  
‚úÖ WebP –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è  
‚úÖ –°–æ–∑–¥–∞—é—Ç—Å—è –ø—Ä–µ–≤—å—é (thumb 250x250, preview 600x600)  
‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ MediaLibrary  

---

**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** 30 –¥–µ–∫–∞–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** 1.2

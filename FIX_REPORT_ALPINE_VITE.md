# üîß –û—Ç—á—ë—Ç –æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ Alpine.js –∏ Vite

## üî¥ –ü—Ä–æ–±–ª–µ–º—ã

### 1. **Alpine.js –æ—à–∏–±–∫–∏**
```
Alpine Expression Error: Unexpected token ';'
Alpine Expression Error: currentImage is not defined
Alpine Expression Error: currentIndex is not defined
```

**–ü—Ä–∏—á–∏–Ω–∞:** –§—É–Ω–∫—Ü–∏—è `engineGallery()` –±—ã–ª–∞ –æ–±—ä—è–≤–ª–µ–Ω–∞ –≤ Blade —Ñ–∞–π–ª–µ –≤–Ω—É—Ç—Ä–∏ `@pushOnce('scripts')`, –Ω–æ:
- Alpine.js –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ CDN —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π
- –§—É–Ω–∫—Ü–∏—è –±—ã–ª–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ —Ä–∞–Ω—å—à–µ, —á–µ–º Alpine –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª—Å—è (race condition)
- –≠—Ç–æ –≤—ã–∑—ã–≤–∞–ª–æ –æ—à–∏–±–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ Alpine –≤—ã—Ä–∞–∂–µ–Ω–∏–π

### 2. **Vite –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ**
- HMR –∫–æ–Ω—Ñ–∏–≥ –±—ã–ª —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ `protocol: 'wss'` –∏ 443 –ø–æ—Ä—Ç
- –≠—Ç–æ –±—ã–ª–æ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞, –Ω–æ –ª–æ–º–∞–ª–æ –ª–æ–∫–∞–ª—å–Ω—É—é —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É
- –ù–∞ localhost –Ω—É–∂–µ–Ω –æ–±—ã—á–Ω—ã–π `ws` –ø—Ä–æ—Ç–æ–∫–æ–ª

---

## ‚úÖ –†–µ—à–µ–Ω–∏—è

### 1. **–ü–µ—Ä–µ–Ω–æ—Å —Ñ—É–Ω–∫—Ü–∏–∏ `engineGallery()` –≤ Vite –±–∞–Ω–¥–ª**

**–§–∞–π–ª:** `resources/js/app.js`

–§—É–Ω–∫—Ü–∏—è —Ç–µ–ø–µ—Ä—å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –≤ JavaScript –±–∞–Ω–¥–ª–µ (–≥–ª–æ–±–∞–ª—å–Ω–æ) –î–û –∑–∞–≥—Ä—É–∑–∫–∏ Alpine:

```javascript
window.engineGallery = function(images) {
   return {
      images: images,
      currentIndex: 0,
      isOpen: false,
      // ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞
   }
};
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –§—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –î–û –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Alpine
- ‚úÖ –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ Vite (–Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç CDN –∑–∞–¥–µ—Ä–∂–∫–∏)
- ‚úÖ Hot Module Replacement —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### 2. **–£–¥–∞–ª–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä—É—é—â–µ–≥–æ—Å—è –∫–æ–¥–∞ –∏–∑ Blade**

**–§–∞–π–ª:** `resources/views/components/engine-gallery.blade.php`

–£–¥–∞–ª—ë–Ω –≤–µ—Å—å –±–ª–æ–∫ `@pushOnce('scripts')` —Å —Ñ—É–Ω–∫—Ü–∏–µ–π. Blade –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ç–µ–ø–µ—Ä—å –ø—Ä–æ—Å—Ç–æ:
```php
<div x-data="engineGallery(@json($images))" class="engine-gallery">
   <!-- HTML —Ä–∞–∑–º–µ—Ç–∫–∞ -->
</div>
```

### 3. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Vite –∫–æ–Ω—Ñ–∏–≥–∞ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã**

**–§–∞–π–ª:** `vite.config.js`

```javascript
hmr: {
    host: process.env.VITE_HMR_HOST || 'localhost',
    port: process.env.VITE_HMR_PORT || 5173,
    protocol: process.env.VITE_HMR_PROTOCOL || 'ws',  // ‚Üê –∏–∑–º–µ–Ω–µ–Ω–æ —Å 'wss'
},
```

### 4. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ `.env` –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏**

**–§–∞–π–ª:** `.env`

```properties
VITE_HMR_HOST=localhost
VITE_HMR_PORT=5173
VITE_HMR_PROTOCOL=ws
```

---

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### **–õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞**

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
npm install

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å Vite dev —Å–µ—Ä–≤–µ—Ä
npm run dev

# 3. –û—Ç–∫—Ä—ã—Ç—å –±—Ä–∞—É–∑–µ—Ä
# Laravel –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: http://localhost:11000
# Vite HMR: http://localhost:5173 (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π)
```

### **–°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–¥–∞–∫—à–Ω –±–∞–Ω–¥–ª–∞**

```bash
npm run build
```

---

## üìã –ß–µ–∫-–ª–∏—Å—Ç –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏

- [ ] Vite dev —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] –ù–µ—Ç –∫–æ–Ω—Å–æ–ª—å–Ω—ã—Ö –æ—à–∏–±–æ–∫ Alpine.js
- [ ] –ì–∞–ª–µ—Ä–µ—è –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- [ ] –ö–ª–∏–∫ –ø–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
- [ ] –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∫–ª–∞–≤–∏—à–∞–º Arrow Left/Right —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª–∞ –∫–ª–∞–≤–∏—à–µ–π ESC —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Hot Module Replacement —Ä–∞–±–æ—Ç–∞–µ—Ç (–∏–∑–º–µ–Ω–µ–Ω–∏—è CSS –≤–∏–¥–Ω—ã —Å—Ä–∞–∑—É)

---

## üîó –ü–æ—Ä—Ç—ã

| –°–µ—Ä–≤–∏—Å | –ê–¥—Ä–µ—Å | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ |
|--------|-------|---------------|
| Laravel App | `http://localhost:11000` | –û—Å–Ω–æ–≤–Ω–æ–π —Å–∞–π—Ç |
| Vite Dev Server | `http://localhost:5173` | Hot Module Replacement |
| Vite HMR | `ws://localhost:5173` | WebSocket –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π |

---

## üìù –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã

1. ‚úÖ `resources/js/app.js` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `engineGallery()`
2. ‚úÖ `resources/views/components/engine-gallery.blade.php` ‚Äî —É–¥–∞–ª—ë–Ω –¥—É–±–ª–∏—Ä—É—é—â–∏–π—Å—è –∫–æ–¥
3. ‚úÖ `vite.config.js` ‚Äî –∏—Å–ø—Ä–∞–≤–ª–µ–Ω HMR –∫–æ–Ω—Ñ–∏–≥
4. ‚úÖ `.env` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω—ã VITE_HMR –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ (production) –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥—Ä—É–≥–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
- `VITE_HMR_HOST=avrb1749.ru`
- `VITE_HMR_PORT=443`
- `VITE_HMR_PROTOCOL=wss`

–≠—Ç–æ —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –≤ `.env.production` –∏–ª–∏ Docker –∫–æ–Ω—Ñ–∏–≥–∞—Ö.

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

- üü¢ Alpine.js —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
- üü¢ Vite HMR —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ
- üü¢ CSS –∏ JS –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- üü¢ –ì–∞–ª–µ—Ä–µ—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ

# üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é –∞—Å—Å–µ—Ç–æ–≤ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

–≠—Ç–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ–º–æ–∂–µ—Ç —Ä–µ—à–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–≥—Ä—É–∑–∫–æ–π –∞—Å—Å–µ—Ç–æ–≤ (404 –æ—à–∏–±–∫–∏) –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ.

## üìã –ü—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã

1. ‚úÖ **script.js** - –¥–æ–±–∞–≤–ª–µ–Ω –≤ Vite —Å–±–æ—Ä–∫—É –∏ –∏–∑–º–µ–Ω–µ–Ω —Å–ø–æ—Å–æ–± –∑–∞–≥—Ä—É–∑–∫–∏ –≤ —à–∞–±–ª–æ–Ω–µ
2. ‚úÖ **Basset –∞—Å—Å–µ—Ç—ã** - —Ç—Ä–µ–±—É–µ—Ç—Å—è –∏–Ω—Ç–µ—Ä–Ω–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
3. ‚úÖ **Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤

## üîß –ü–æ—à–∞–≥–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

### –®–∞–≥ 1: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ

–í —Ñ–∞–π–ª–µ `.env` –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:

```bash
APP_ENV=production
APP_DEBUG=false
BASSET_DEV_MODE=false
```

### –®–∞–≥ 2: –°–æ–±–µ—Ä–∏—Ç–µ Vite –∞—Å—Å–µ—Ç—ã –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

```bash
# –í–æ–π—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker-compose exec app bash

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã)
npm install

# –°–æ–±—Ä–∞—Ç—å –∞—Å—Å–µ—Ç—ã –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
npm run build
```

–ò–ª–∏ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π:

```bash
docker-compose exec app npm run build
```

–≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –≤ `public/build/assets/` —Å —Ö–µ—à–∞–º–∏ –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è.

### –®–∞–≥ 3: –ò–Ω—Ç–µ—Ä–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ Basset –∞—Å—Å–µ—Ç—ã

Basset –¥–æ–ª–∂–µ–Ω —Å–∫–∞—á–∞—Ç—å –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ –≤—Å–µ CDN –∞—Å—Å–µ—Ç—ã –∏ —Ñ–∞–π–ª—ã –∏–∑ vendor. –í—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
# –í–æ–π—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker-compose exec app bash

# –ò–Ω—Ç–µ—Ä–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –∞—Å—Å–µ—Ç—ã
php artisan basset:internalize

# –û—á–∏—Å—Ç–∏—Ç—å –∫–µ—à –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–≤–∞–∂–Ω–æ!)
php artisan config:clear
php artisan cache:clear
```

–ò–ª–∏ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π:

```bash
docker-compose exec app php artisan basset:internalize && docker-compose exec app php artisan config:clear && docker-compose exec app php artisan cache:clear
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞:
- –°–∫–∞—á–∞–µ—Ç –≤—Å–µ CDN –∞—Å—Å–µ—Ç—ã (sweetalert.min.js, tabler.min.js –∏ —Ç.–¥.)
- –°–∫–æ–ø–∏—Ä—É–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –∏–∑ vendor (tabler.js, common.js –∏ —Ç.–¥.)
- –°–æ—Ö—Ä–∞–Ω–∏—Ç –∏—Ö –≤ `public/basset/`

### –®–∞–≥ 4: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä –º–æ–∂–µ—Ç —á–∏—Ç–∞—Ç—å —Ñ–∞–π–ª—ã:

```bash
# –í–æ–π—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker-compose exec app bash

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∞–≤–∞
chmod -R 755 public/build
chmod -R 755 public/basset
chown -R www-data:www-data public/build public/basset
```

### –®–∞–≥ 5: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã

```bash
docker-compose restart nginx
docker-compose restart app
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–æ–≤

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Vite –∞—Å—Å–µ—Ç—ã
docker-compose exec app ls -la public/build/assets/

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Basset –∞—Å—Å–µ—Ç—ã
docker-compose exec app ls -la public/basset/
```

–î–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ñ–∞–π–ª—ã:
- `public/build/assets/script-*.js` (—Å —Ö–µ—à–µ–º)
- `public/build/assets/app-*.js`
- `public/build/assets/app-*.css`
- `public/basset/` (–ø–∞–ø–∫–∞ —Å –∏–Ω—Ç–µ—Ä–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∞—Å—Å–µ—Ç–∞–º–∏)

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ

–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ (F12) –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ 404 –¥–ª—è `script.js`
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ 404 –¥–ª—è `sweetalert.min.js`
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ 404 –¥–ª—è `tabler.js`, `tabler.min.js`
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ 404 –¥–ª—è `common.js`

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏

```bash
# –õ–æ–≥–∏ nginx
docker-compose logs nginx | grep "404"

# –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
docker-compose logs app | grep -i error
```

## üõ†Ô∏è –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –¥–µ–ø–ª–æ—è

–°–æ–∑–¥–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç `deploy-assets.sh`:

```bash
#!/bin/bash
set -e

echo "üî® –°–±–æ—Ä–∫–∞ Vite –∞—Å—Å–µ—Ç–æ–≤..."
docker-compose exec -T app npm run build

echo "üì¶ –ò–Ω—Ç–µ—Ä–Ω–∞–ª–∏–∑–∞—Ü–∏—è Basset –∞—Å—Å–µ—Ç–æ–≤..."
docker-compose exec -T app php artisan basset:internalize

echo "üßπ –û—á–∏—Å—Ç–∫–∞ –∫–µ—à–∞..."
docker-compose exec -T app php artisan config:clear
docker-compose exec -T app php artisan cache:clear

echo "üîê –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞..."
docker-compose exec -T app chmod -R 755 public/build public/basset

echo "üîÑ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤..."
docker-compose restart nginx app

echo "‚úÖ –î–µ–ø–ª–æ–π –∞—Å—Å–µ—Ç–æ–≤ –∑–∞–≤–µ—Ä—à–µ–Ω!"
```

–°–¥–µ–ª–∞–π—Ç–µ –µ–≥–æ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º –∏ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –¥–µ–ø–ª–æ–µ:

```bash
chmod +x deploy-assets.sh
./deploy-assets.sh
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **Basset –≤ dev_mode**: –ï—Å–ª–∏ `BASSET_DEV_MODE=true`, –∞—Å—Å–µ—Ç—ã –Ω–µ –±—É–¥—É—Ç –∏–Ω—Ç–µ—Ä–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –Ω–∞–ø—Ä—è–º—É—é –∏–∑ CDN/vendor. –ù–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ —ç—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å `false`.

2. **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Basset –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –æ—á–∏—Å—Ç–∏—Ç–µ –∫–µ—à: `php artisan config:clear`

3. **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ (–æ–±—ã—á–Ω–æ `www-data`) –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞ –Ω–∞ —á—Ç–µ–Ω–∏–µ –ø–∞–ø–æ–∫ `public/build` –∏ `public/basset`.

4. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞—Å—Å–µ—Ç–æ–≤**: –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∞—Å—Å–µ—Ç–æ–≤ –Ω—É–∂–Ω–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —à–∞–≥–∏ 2 –∏ 3.

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: –ê—Å—Å–µ—Ç—ã –≤—Å–µ –µ—â–µ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
   ```bash
   docker-compose exec app php artisan tinker
   >>> config('backpack.basset.dev_mode')  // –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å false
   >>> config('app.env')  // –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 'production'
   ```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:
   ```bash
   docker-compose exec app ls -la public/ | grep -E "build|basset"
   ```

3. –û—á–∏—Å—Ç–∏—Ç–µ –≤—Å–µ –∫–µ—à–∏:
   ```bash
   docker-compose exec app php artisan optimize:clear
   ```

### –ü—Ä–æ–±–ª–µ–º–∞: Basset –Ω–µ –∏–Ω—Ç–µ—Ä–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∞—Å—Å–µ—Ç—ã

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å CDN (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è):
   ```bash
   docker-compose exec app curl -I https://cdn.jsdelivr.net/npm/sweetalert@2.1.2/dist/sweetalert.min.js
   ```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
   ```bash
   docker-compose exec app php artisan basset:internalize -v
   ```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- [Laravel Vite –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://laravel.com/docs/vite)
- [Backpack Basset –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://backpackforlaravel.com/docs)


# üì∏ –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏ –º–æ—Ç–æ—Ä–æ–≤

## ‚úÖ –°—Ç–∞—Ç—É—Å: –ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ

–°–∏—Å—Ç–µ–º–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏ –º–æ—Ç–æ—Ä–æ–≤ **–ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞** –Ω–∞ –±–∞–∑–µ **Livewire 3** –∏ **Spatie Media Library**.

---

## üöÄ –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢

### 1. –û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
```
/admin/engines
```

### 2. –í—ã–±–µ—Ä–∏—Ç–µ –º–æ—Ç–æ—Ä –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É

### 4. –í–Ω–∏–∑—É –ø–æ—è–≤–∏—Ç—Å—è –±–ª–æ–∫ "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏"

### 5. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ
- –ù–∞–∂–º–∏—Ç–µ "–í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª—ã"
- –í—ã–±–µ—Ä–∏—Ç–µ 1-6 –∫–∞—Ä—Ç–∏–Ω–æ–∫ (JPG, PNG, WEBP, max 5 MB)
- –ù–∞–∂–º–∏—Ç–µ "–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ"

### 6. –£–¥–∞–ª–∏—Ç–µ —Ñ–æ—Ç–æ
- –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É üóëÔ∏è –Ω–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏

**‚úÖ –í–°–Å!** –§–æ—Ç–æ —Ç–µ–ø–µ—Ä—å —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Å –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏!

---

## üìö –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø

–ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ –≤ —ç—Ç–æ–º –ø–æ—Ä—è–¥–∫–µ:

1. **[MEDIA_QUICKSTART.md](MEDIA_QUICKSTART.md)** ‚≠ê –ù–∞—á–Ω–∏—Ç–µ –∑–¥–µ—Å—å!
   - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
   - –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
   - –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã

2. **[MEDIA_GALLERY_IMPLEMENTATION.md](MEDIA_GALLERY_IMPLEMENTATION.md)**
   - –ü–æ–ª–Ω–∞—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
   - –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è

3. **[MEDIA_SYSTEM_SUMMARY.md](MEDIA_SYSTEM_SUMMARY.md)**
   - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
   - –ü–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö
   - –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è

4. **[FILES_REFERENCE.md](FILES_REFERENCE.md)**
   - –°–ø—Ä–∞–≤–∫–∞ –ø–æ –≤—Å–µ–º —Ñ–∞–π–ª–∞–º
   - –ë—ã—Å—Ç—Ä–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è

5. **[GIT_COMMIT_GUIDE.md](GIT_COMMIT_GUIDE.md)**
   - –ö–∞–∫ –∑–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
   - Git –∫–æ–º–∞–Ω–¥—ã

---

## üì¶ –ß–¢–û –ë–´–õ–û –°–û–ó–î–ê–ù–û

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ | –°—Ç—Ä–æ–∫ |
|------|----------|-------|
| `app/Livewire/EngineMediaManager.php` | –ö–æ–º–ø–æ–Ω–µ–Ω—Ç Livewire | 132 |
| `resources/views/livewire/engine-media-manager.blade.php` | UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ | 134 |
| `resources/views/vendor/backpack/crud/engines_edit.blade.php` | –§–æ—Ä–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è | 98 |
| `app/Http/Controllers/Admin/EnginesCrudController.php` | –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä (–æ–±–Ω–æ–≤–ª–µ–Ω) | - |

---

## ‚öôÔ∏è –¢–ï–•–ù–û–õ–û–ì–ò–Ø

- **Livewire 3** - —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- **Spatie Media Library** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ–¥–∏–∞
- **Bootstrap 5** - —Å—Ç–∏–ª–∏
- **Laravel 11** - —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **MySQL** - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

---

## ‚ú® –§–£–ù–ö–¶–ò–û–ù–ê–õ–¨–ù–û–°–¢–¨

‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π  
‚úÖ –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π  
‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–æ—Ç–æ  
‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è (JPG, PNG, WEBP, max 5 MB)  
‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± —É—Å–ø–µ—Ö–µ/–æ—à–∏–±–∫–µ  
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–µ–≤—å—é (thumb, preview)  
‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤  
‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Spatie Media Library  
‚úÖ –í—Å—Ç—Ä–æ–µ–Ω–æ –≤ –∞–¥–º–∏–Ω–∫—É  

---

## üéØ –û–°–ù–û–í–ù–´–ï –§–ê–ô–õ–´

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç Livewire
```php
// app/Livewire/EngineMediaManager.php
class EngineMediaManager extends Component
{
    use WithFileUploads;
    
    public Engine $engine;
    public $images = [];
    public $uploadedFiles = [];
    
    public function saveMedia()    // –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ
    public function deleteImage()  // –£–¥–∞–ª–∏—Ç—å —Ñ–æ—Ç–æ
    public function loadImages()   // –°–ø–∏—Å–æ–∫ —Ñ–æ—Ç–æ
}
```

### View
```blade
<!-- resources/views/livewire/engine-media-manager.blade.php -->
<div class="card">
    <!-- –ì–∞–ª–µ—Ä–µ—è —Ñ–æ—Ç–æ -->
    @foreach($images as $image)
        <img src="{{ $image['thumb'] }}">
        <button wire:click="deleteImage({{ $image['id'] }})">üóëÔ∏è</button>
    @endforeach
    
    <!-- –§–æ—Ä–º–∞ –∑–∞–≥—Ä—É–∑–∫–∏ -->
    <input type="file" wire:model="uploadedFiles" multiple>
    <button wire:click="saveMedia">–ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
</div>
```

### –§–æ—Ä–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
```blade
<!-- resources/views/vendor/backpack/crud/engines_edit.blade.php -->
<form method="post">
    <!-- –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è -->
    @include('crud::form_content')
</form>

<!-- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–æ—Ç–æ -->
<livewire:engine-media-manager :engine="$entry" />
```

---

## üîç –ü–†–û–í–ï–†–ö–ò

–í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã ‚úÖ

- [x] –°–∏–Ω—Ç–∞–∫—Å–∏—Å PHP
- [x] –ö–ª–∞—Å—Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- [x] View —Ñ–∞–π–ª —Å–æ–∑–¥–∞–Ω
- [x] –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –æ–±–Ω–æ–≤–ª–µ–Ω
- [x] –ö–æ–Ω–≤–µ—Ä—Å–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [x] Disk 'public' –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω
- [x] WithFileUploads –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è
- [x] Spatie –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞

---

## üíæ –ì–î–ï –•–†–ê–ù–Ø–¢–°–Ø –§–ê–ô–õ–´

```
storage/app/public/
‚îú‚îÄ‚îÄ <guid>/
‚îÇ   ‚îú‚îÄ‚îÄ original-image.jpg (–æ—Ä–∏–≥–∏–Ω–∞–ª)
‚îÇ   ‚îú‚îÄ‚îÄ conversions/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ thumb-250x250.jpg (–¥–ª—è –∫–∞—Ç–∞–ª–æ–≥–∞)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ preview-600x600.jpg (–¥–ª—è –¥–µ—Ç–∞–ª–µ–π)
‚îÇ   ‚îî‚îÄ‚îÄ generated_conversions.json
```

**URL –¥–æ—Å—Ç—É–ø–∞:**
```
/storage/<guid>/original-image.jpg
/storage/<guid>/conversions/thumb-250x250.jpg
```

---

## üêõ –ß–¢–û –î–ï–õ–ê–¢–¨ –ï–°–õ–ò –ß–¢–û-–¢–û –ù–ï –†–ê–ë–û–¢–ê–ï–¢

### –§–æ—Ç–æ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
```bash
mkdir -p storage/livewire-tmp
chmod 755 storage/livewire-tmp
php artisan storage:link
tail -f storage/logs/laravel.log
```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è
```bash
php -r "echo class_exists('App\Livewire\EngineMediaManager') ? 'OK' : 'NOT FOUND';"
```

### –ü–æ–¥—Ä–æ–±–Ω–µ–µ —Å–º–æ—Ç—Ä–∏—Ç–µ –≤
üëâ [MEDIA_GALLERY_IMPLEMENTATION.md](MEDIA_GALLERY_IMPLEMENTATION.md#-–æ—Ç–ª–∞–¥–∫–∞)

---

## üìù –ö–û–î –ü–†–ò–ú–ï–†–´

### –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª—ã –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ
```blade
@foreach($engine->getAllImages() as $image)
    <img src="{{ $image['thumb'] }}" alt="...">
@endforeach
```

### –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Ñ–æ—Ç–æ –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ
```php
$images = $engine->getAllImages();
$images = $engine->getMedia('images');
```

### –£–¥–∞–ª–∏—Ç—å —Ñ–æ—Ç–æ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ
```php
$engine->deleteMedia($mediaId);
```

---

## üé® –ö–ê–°–¢–û–ú–ò–ó–ê–¶–ò–Ø

### –ò–∑–º–µ–Ω–∏—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞
```php
// app/Livewire/EngineMediaManager.php
'uploadedFiles.*' => 'required|file|mimes:jpeg,png,webp|max:10240', // 10 MB
```

### –ò–∑–º–µ–Ω–∏—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–æ—Ç–æ
```php
if ($currentImages + $newFiles > 10) {  // 10 –≤–º–µ—Å—Ç–æ 6
    throw new \Exception('Max 10 photos');
}
```

### –ò–∑–º–µ–Ω–∏—Ç—å —Ä–∞–∑–º–µ—Ä –∫–æ–Ω–≤–µ—Ä—Å–∏–π
```php
// app/Models/Engine.php
$this->addMediaConversion('thumb')
    ->crop(500, 500)  // –ù–æ–≤—ã–π —Ä–∞–∑–º–µ—Ä
    ->quality(90)     // –ù–æ–≤–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ
    ->nonQueued();
```

---

## üí° –°–û–í–ï–¢–´ –ò –¢–†–Æ–ö–ò

1. **–û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à —Ñ–æ—Ç–æ:** `php artisan cache:clear`
2. **–ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤:** `tail -f storage/logs/laravel.log`
3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ë–î:** `sqlite3 database/database.sqlite "SELECT COUNT(*) FROM media;"`
4. **–û—á–∏—Å—Ç–∏—Ç—å temp:** `rm -rf storage/livewire-tmp/*`

---

## üîó –ü–û–õ–ï–ó–ù–´–ï –°–°–´–õ–ö–ò

- [Livewire 3 Docs](https://livewire.laravel.com/)
- [Spatie Media Library](https://spatie.be/docs/laravel-medialibrary/v10/introduction)
- [Backpack Admin Panel](https://backpackforlaravel.com/)
- [Laravel Documentation](https://laravel.com/docs)

---

## üìû –ü–û–î–î–ï–†–ñ–ö–ê

–ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å:

1. –ß–∏—Ç–∞–π—Ç–µ [MEDIA_GALLERY_IMPLEMENTATION.md](MEDIA_GALLERY_IMPLEMENTATION.md)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–¥–µ–ª "üêõ –û—Ç–ª–∞–¥–∫–∞"
3. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ [MEDIA_QUICKSTART.md](MEDIA_QUICKSTART.md#-–µ—Å–ª–∏-—á—Ç–æ-—Ç–æ-–Ω–µ-—Ä–∞–±–æ—Ç–∞–µ—Ç)

---

## ‚úÖ –ì–û–¢–û–í–û!

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

**–ù–∞—á–Ω–∏—Ç–µ —Å:** [MEDIA_QUICKSTART.md](MEDIA_QUICKSTART.md)

---

**–í–µ—Ä—Å–∏—è:** 1.0  
**–î–∞—Ç–∞:** 30 –¥–µ–∫–∞–±—Ä—è 2025 –≥.  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ Production Ready

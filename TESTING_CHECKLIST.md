# ‚úÖ –ß–ï–ö-–õ–ò–°–¢: –ü–†–û–í–ï–†–ö–ê –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –û–®–ò–ë–ö–ò –ó–ê–ì–†–£–ó–ö–ò –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ô

## üìã –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞

- [ ] –§–∞–π–ª `app/Http/Requests/EnginesRequest.php`:
  - [ ] –ü—Ä–∞–≤–∏–ª–æ `image` –£–î–ê–õ–ï–ù–û
  - [ ] –ü—Ä–∞–≤–∏–ª–æ `mimes:jpeg,jpg,png,webp` –°–û–•–†–ê–ù–ï–ù–û
  - [ ] –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ `'images.*.image'` –£–î–ê–õ–ï–ù–û

- [ ] –§–∞–π–ª `app/Models/Engine.php`:
  - [ ] `image/jpg` –£–î–ê–õ–ï–ù–û –∏–∑ MIME-—Ç–∏–ø–æ–≤
  - [ ] `image/jpeg`, `image/png`, `image/webp` –ü–†–ò–°–£–¢–°–¢–í–£–Æ–¢

- [ ] –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã:
  - [ ] `app/Console/Commands/CheckImageSupport.php` ‚úÖ
  - [ ] `app/Http/Controllers/DiagnosticsController.php` ‚úÖ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

```bash
# –®–∞–≥ 1: –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à
docker exec php_local php artisan cache:clear
docker exec php_local php artisan view:clear

# –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É
docker exec php_local php artisan image:check-support
# –†–µ–∑—É–ª—å—Ç–∞—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å:
# ‚úÖ GD —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ
# ‚úÖ JPEG (imagejpeg)
# ‚úÖ PNG (imagepng)
# ‚úÖ WebP (imagewebp)
```

## üß™ –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫–∞

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ó–∞–≥—Ä—É–∑–∫–∞ JPG

- [ ] –û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω–∫—É
- [ ] –û—Ç–∫—Ä–æ–π—Ç–µ/—Å–æ–∑–¥–∞–π—Ç–µ –º–æ—Ç–æ—Ä
- [ ] –ó–∞–≥—Ä—É–∑–∏—Ç–µ JPG —Ñ–∞–π–ª (2-3 MB)
- [ ] –ù–∞–∂–º–∏—Ç–µ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"
- [ ] ‚úÖ –§–∞–π–ª –∑–∞–≥—Ä—É–∑–∏–ª—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] ‚úÖ –í —Å–ø–∏—Å–∫–µ –≤–∏–¥–Ω–∞ –º–∏–Ω–∏–∞—Ç—é—Ä–∞
- [ ] ‚úÖ –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Ç–æ–≤–∞—Ä–∞ –≤–∏–¥–Ω–æ –ø–æ–ª–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ó–∞–≥—Ä—É–∑–∫–∞ PNG

- [ ] –ü–æ–≤—Ç–æ—Ä–∏—Ç—å —Å—Ü–µ–Ω–∞—Ä–∏–π 1 —Å PNG —Ñ–∞–π–ª–æ–º
- [ ] –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–∏–ª–∞—Å—å (–µ—Å–ª–∏ –±—ã–ª–∞)

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ó–∞–≥—Ä—É–∑–∫–∞ WebP

- [ ] –ü–æ–≤—Ç–æ—Ä–∏—Ç—å —Å—Ü–µ–Ω–∞—Ä–∏–π 1 —Å WebP —Ñ–∞–π–ª–æ–º

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞

- [ ] –ó–∞–≥—Ä—É–∑–∏—Ç–µ 6 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- [ ] ‚úÖ –í—Å–µ –∑–∞–≥—Ä—É–∑–∏–ª–∏—Å—å —É—Å–ø–µ—à–Ω–æ
- [ ] –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–≥—Ä—É–∑–∏—Ç—å 7-–µ
- [ ] ‚úÖ –ü–æ–ª—É—á–µ–Ω–∞ –æ—à–∏–±–∫–∞ "–ú–∞–∫—Å–∏–º—É–º 6 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π"

### –°—Ü–µ–Ω–∞—Ä–∏–π 5: –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞

- [ ] –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª —Ä–∞–∑–º–µ—Ä–æ–º > 5 MB
- [ ] –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–≥—Ä—É–∑–∏—Ç—å
- [ ] ‚úÖ –ü–æ–ª—É—á–µ–Ω–∞ –æ—à–∏–±–∫–∞ "–†–∞–∑–º–µ—Ä –Ω–µ –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–≤—ã—à–∞—Ç—å 5 MB"

### –°—Ü–µ–Ω–∞—Ä–∏–π 6: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç

- [ ] –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–≥—Ä—É–∑–∏—Ç—å SVG, GIF, PDF –∏–ª–∏ –¥—Ä—É–≥–æ–π —Ñ–æ—Ä–º–∞—Ç
- [ ] ‚úÖ –ü–æ–ª—É—á–µ–Ω–∞ –æ—à–∏–±–∫–∞ "–î–æ–ø—É—Å—Ç–∏–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã: JPG, PNG, WEBP"

### –°—Ü–µ–Ω–∞—Ä–∏–π 7: –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

- [ ] –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫ –º–æ—Ç–æ—Ä—É
- [ ] –û—Ç–∫—Ä–æ–π—Ç–µ –¥—Ä—É–≥–æ–π –º–æ—Ç–æ—Ä –∏ –≤–µ—Ä–Ω–∏—Ç–µ—Å—å
- [ ] ‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—Å—ë –µ—â—ë –≤–∏–¥–Ω–æ (–∏–∑ –∫—ç—à–∞)
- [ ] –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –º–æ—Ç–æ—Ä –∏ –¥–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
- [ ] ‚úÖ –ö—ç—à –æ—á–∏—â–µ–Ω, –≤–∏–¥–Ω—ã –æ–±–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –õ–æ–∫–∞–ª—å–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏–µ

```
–î–∞—Ç–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è: [___________]
–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫: [___________]

–°—Ü–µ–Ω–∞—Ä–∏–π 1 (JPG): [ ] PASS [ ] FAIL
–°—Ü–µ–Ω–∞—Ä–∏–π 2 (PNG): [ ] PASS [ ] FAIL
–°—Ü–µ–Ω–∞—Ä–∏–π 3 (WebP): [ ] PASS [ ] FAIL
–°—Ü–µ–Ω–∞—Ä–∏–π 4 (√ó6): [ ] PASS [ ] FAIL
–°—Ü–µ–Ω–∞—Ä–∏–π 5 (>5MB): [ ] PASS [ ] FAIL
–°—Ü–µ–Ω–∞—Ä–∏–π 6 (SVG): [ ] PASS [ ] FAIL
–°—Ü–µ–Ω–∞—Ä–∏–π 7 (–ö—ç—à): [ ] PASS [ ] FAIL

–û–±—â–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: [ ] ‚úÖ PASSED [ ] ‚ùå FAILED
```

### Production –æ–∫—Ä—É–∂–µ–Ω–∏–µ

```
–î–∞—Ç–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è: [___________]
–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫: [___________]

–ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å: [ ] ‚úÖ OK [ ] ‚ùå FAIL
–ó–∞–≥—Ä—É–∑–∫–∞ PNG: [ ] ‚úÖ OK [ ] ‚ùå FAIL
–ó–∞–≥—Ä—É–∑–∫–∞ JPG: [ ] ‚úÖ OK [ ] ‚ùå FAIL
–ó–∞–≥—Ä—É–∑–∫–∞ WebP: [ ] ‚úÖ OK [ ] ‚ùå FAIL
–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –∫–∞—Ç–∞–ª–æ–≥–µ: [ ] ‚úÖ OK [ ] ‚ùå FAIL
–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Ç–æ–≤–∞—Ä–∞: [ ] ‚úÖ OK [ ] ‚ùå FAIL
```

## üöÄ –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –ü–µ—Ä–µ–¥ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ–º

- [ ] –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏–∏
- [ ] –ö–æ–¥ –∑–∞–ª–∏—Ç –≤ –≤–µ—Ç–∫—É `dev`
- [ ] –°–æ–∑–¥–∞–Ω –∫–æ–º–º–∏—Ç —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º

### –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ production

```bash
# –ù–∞ production —Å–µ—Ä–≤–µ—Ä–µ
cd /app

# –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥
git pull origin dev

# –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à
php artisan cache:clear
php artisan view:clear

# –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ GD —Ä–∞–±–æ—Ç–∞–µ—Ç
php artisan image:check-support

# –ì–æ—Ç–æ–≤–æ!
```

### –ü–æ—Å–ª–µ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è

- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–¥–º–∏–Ω–∫—É
- [ ] –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –∫–∞—Ç–∞–ª–æ–≥–µ
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Ç–æ–≤–∞—Ä–∞

## üìå –í–∞–∂–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è review

```
‚úÖ app/Http/Requests/EnginesRequest.php
   –ò–∑–º–µ–Ω–µ–Ω–∏–µ: –£–¥–∞–ª–µ–Ω–æ –ø—Ä–∞–≤–∏–ª–æ `image`, –æ—Å—Ç–∞–≤–ª–µ–Ω–æ `mimes`

‚úÖ app/Models/Engine.php
   –ò–∑–º–µ–Ω–µ–Ω–∏–µ: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã MIME-—Ç–∏–ø—ã (—É–¥–∞–ª–µ–Ω `image/jpg`)

‚úÖ app/Console/Commands/CheckImageSupport.php
   –ù–æ–≤—ã–π —Ñ–∞–π–ª: –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

‚úÖ app/Http/Controllers/DiagnosticsController.php
   –ù–æ–≤—ã–π —Ñ–∞–π–ª: –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–ª—è –≤–µ–±-–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

‚úÖ USER_GUIDE_IMAGE_UPLOAD.md
   –ù–æ–≤—ã–π —Ñ–∞–π–ª: –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

‚úÖ IMAGE_UPLOAD_FIX_FINAL.md
   –ù–æ–≤—ã–π —Ñ–∞–π–ª: –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

‚úÖ UPLOAD_FIX_SUMMARY.md
   –ù–æ–≤—ã–π —Ñ–∞–π–ª: –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ
```

## üÜò –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –û—Ç–ª–∞–¥–∫–∞

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏:**
   ```bash
   tail -f storage/logs/laravel.log | grep -i image
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ë–î:**
   ```bash
   # –í –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
   php artisan tinker
   >>> App\Models\Engine::find(5)->getMedia('images')
   ```

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É:**
   ```bash
   ls -la storage/app/public/
   ```

4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:**
   ```bash
   chmod -R 755 storage/
   chown -R www-data:www-data storage/
   ```

## ‚ú® –ó–Ω–∞–∫–∏ —É—Å–ø–µ—Ö–∞

–í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –µ—Å–ª–∏:

‚úÖ PNG, JPG, WebP –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫  
‚úÖ –°–æ–∑–¥–∞—é—Ç—Å—è –º–∏–Ω–∏–∞—Ç—é—Ä—ã (thumb) –∏ –ø—Ä–µ–≤—å—é (preview)  
‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –∞–¥–º–∏–Ω–∫–µ  
‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –∫–∞—Ç–∞–ª–æ–≥–µ  
‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Ç–æ–≤–∞—Ä–∞  
‚úÖ –ö—ç—à —Ä–∞–±–æ—Ç–∞–µ—Ç (–≤—Ç–æ—Ä–æ–π —Ä–∞–∑ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –±—ã—Å—Ç—Ä–µ–µ)  
‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç  

---

**–°—Ç–∞—Ç—É—Å:** üîÑ –í –ø—Ä–æ—Ü–µ—Å—Å–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è  
**–î–∞—Ç–∞:** 30 –¥–µ–∫–∞–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** 1.2
